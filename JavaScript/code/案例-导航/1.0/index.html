<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>导航</title>
    <style>
        a {
            text-decoration: none;
        }

        /* 导航 样式 */
        .index-nav {
            position: relative;
            padding: 22px 0 20px;
            overflow: hidden;
        }

        .index-nav div {
            float: left;
            margin-right: 50px;
            perspective: 100px;
            overflow: hidden;
        }

        .index-nav p {
            transform-origin: center center -18px;
            transform-style: preserve-3d;
            height: 36px;
            transition: .3s;
        }

        .index-nav a {
            border: solid transparent;
            border-width: 3px 0;
            display: block;
            font: 18px/30px "微软雅黑";
            color: #000;
            backface-visibility: hidden;
        }

        .index-nav a:nth-child(2) {
            transform-origin: top;
            transform: rotateX(-90deg);
            color: #e75c77;
        }

        .index-nav .active p,
        .index-nav div:hover p {
            transform: rotateX(90deg);
        }

        .index-nav .line {
            position: absolute;
            left: -100px;
            bottom: 0px;
            width: 20px;
            height: 3px;
            background: #e75c77;
        }
    </style>
</head>

<body>
    <nav class="index-nav wrap clear">
        <div class="active">
            <p>
                <a href="#">全部</a>
                <a href="#">全部</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">PC端</a>
                <a href="#">PC端</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">移动端</a>
                <a href="#">移动端</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">菜单</a>
                <a href="#">菜单</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">卡片</a>
                <a href="#">卡片</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">聊天</a>
                <a href="#">聊天</a>
            </p>
            <span class="line"></span>
        </div>
        <div>
            <p>
                <a href="#">图片切换</a>
                <a href="#">图片切换</a>
            </p>
            <span class="line"></span>
        </div>
    </nav>
    <script src="./mTween.js"></script>
    <script>
        /* 导航的下划线跟随 */
        (function () {
            let indexNavs = document.querySelectorAll(".index-nav div");
            let lines = document.querySelectorAll(".index-nav .line");
            let active = document.querySelector(".index-nav .active");
            moveLine(active);
            indexNavs.forEach(item => {
                item.onmouseenter = function () {
                    moveLine(item);
                };
                item.onmouseleave = function () {
                    moveLine(active);
                };
            });

            function moveLine(el) {
                lines.forEach(line => {
                    mTween.stop(line);
                    let l = el.offsetLeft - line.offsetParent.offsetLeft;
                    mTween({
                        el: line,
                        fx: "backOut",
                        duration: {
                            multiple: 4.5,
                            min: 400,
                            max: 1200
                        },
                        attrs: {
                            width: el.offsetWidth,
                            left: l
                        },
                        s: 1.1
                    });
                });
            }
        })();
    </script>
</body>

</html>